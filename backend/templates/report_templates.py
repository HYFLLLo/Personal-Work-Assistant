"""
æŠ¥å‘Šæ¨¡æ¿ç³»ç»Ÿ
æä¾›å¤šç§é¢„å®šä¹‰çš„æŠ¥å‘Šæ¨¡æ¿
"""

from typing import Dict, List, Any
from pydantic import BaseModel
from enum import Enum


class TemplateType(str, Enum):
    """æŠ¥å‘Šæ¨¡æ¿ç±»å‹"""
    GENERAL = "general"         # é€šç”¨/ä¸ä½¿ç”¨æ¨¡æ¿
    WEEKLY = "weekly"           # å‘¨æŠ¥
    MONTHLY = "monthly"         # æœˆæŠ¥
    COMPETITOR = "competitor"   # ç«å“åˆ†æ
    INDUSTRY = "industry"       # è¡Œä¸šç ”ç©¶
    PROJECT = "project"         # é¡¹ç›®æ±‡æŠ¥
    RESEARCH = "research"       # ç ”ç©¶æŠ¥å‘Š
    SUMMARY = "summary"         # æ€»ç»“æ±‡æŠ¥
    MARKETING = "marketing"     # è¥é”€æ–¹æ¡ˆ


class ReportTemplate(BaseModel):
    """æŠ¥å‘Šæ¨¡æ¿æ¨¡å‹"""
    id: str
    name: str
    description: str
    icon: str
    category: str
    structure: List[Dict[str, Any]]
    planner_prompt: str
    report_prompt: str
    default_sections: List[str]


# æŠ¥å‘Šæ¨¡æ¿å®šä¹‰
REPORT_TEMPLATES: Dict[str, ReportTemplate] = {
    TemplateType.GENERAL: ReportTemplate(
        id="general",
        name="ä¸ä½¿ç”¨æ¨¡æ¿",
        description="é€šç”¨æ¨¡å¼ï¼Œæ ¹æ®ä»»åŠ¡æè¿°è‡ªç”±ç”ŸæˆæŠ¥å‘Š",
        icon="ğŸ“",
        category="é€šç”¨",
        structure=[
            {"title": "å¼•è¨€", "description": "æŠ¥å‘ŠèƒŒæ™¯å’Œç›®çš„", "required": False},
            {"title": "æ­£æ–‡", "description": "ä¸»è¦å†…å®¹", "required": True},
            {"title": "ç»“è®º", "description": "æ€»ç»“å’Œå»ºè®®", "required": False}
        ],
        planner_prompt="""è¯·æ ¹æ®ç”¨æˆ·çš„ä»»åŠ¡æè¿°ç”Ÿæˆæœç´¢æ­¥éª¤ã€‚æ³¨æ„ï¼š
1. å……åˆ†ç†è§£ç”¨æˆ·çš„å…·ä½“éœ€æ±‚
2. é’ˆå¯¹æ€§åœ°æœç´¢ç›¸å…³ä¿¡æ¯
3. ä¸å±€é™äºç‰¹å®šæ ¼å¼ï¼Œçµæ´»è§„åˆ’""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”ŸæˆæŠ¥å‘Šã€‚æ³¨æ„ï¼š
1. æ ¹æ®ç”¨æˆ·ä»»åŠ¡éœ€æ±‚çµæ´»ç»„ç»‡å†…å®¹
2. ä¸éœ€è¦éµå¾ªå›ºå®šæ¨¡æ¿ç»“æ„
3. é‡ç‚¹çªå‡ºï¼Œè¯¦ç•¥å¾—å½“
4. è¯­è¨€ä¸“ä¸šã€é€»è¾‘æ¸…æ™°""",
        default_sections=[]
    ),
    
    TemplateType.WEEKLY: ReportTemplate(
        id="weekly",
        name="å·¥ä½œå‘¨æŠ¥",
        description="è®°å½•æœ¬å‘¨å·¥ä½œè¿›å±•ã€æˆæœä¸ä¸‹å‘¨è®¡åˆ’",
        icon="ğŸ“Š",
        category="å·¥ä½œæ±‡æŠ¥",
        structure=[
            {"title": "æœ¬å‘¨æ¦‚è¿°", "description": "ç®€è¦æ€»ç»“æœ¬å‘¨å·¥ä½œé‡ç‚¹", "required": True},
            {"title": "å·¥ä½œæˆæœ", "description": "åˆ—å‡ºæœ¬å‘¨å®Œæˆçš„ä¸»è¦å·¥ä½œåŠæˆæœ", "required": True},
            {"title": "æ•°æ®æŒ‡æ ‡", "description": "å…³é”®æ•°æ®æŒ‡æ ‡åŠå®Œæˆæƒ…å†µ", "required": False},
            {"title": "é—®é¢˜ä¸æŒ‘æˆ˜", "description": "é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ", "required": True},
            {"title": "ä¸‹å‘¨è®¡åˆ’", "description": "ä¸‹å‘¨å·¥ä½œè®¡åˆ’åŠç›®æ ‡", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºå·¥ä½œå‘¨æŠ¥ç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. æœ¬å‘¨è¡Œä¸šåŠ¨æ€å’Œè¶‹åŠ¿
2. ç›¸å…³æ•°æ®æŒ‡æ ‡å’Œ benchmark
3. åŒç±»å·¥ä½œçš„æœ€ä½³å®è·µ
4. ä¸‹å‘¨è®¡åˆ’ç›¸å…³çš„èƒŒæ™¯ä¿¡æ¯""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆå·¥ä½œå‘¨æŠ¥ï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## æœ¬å‘¨æ¦‚è¿°
- ç®€è¦æ€»ç»“æœ¬å‘¨å·¥ä½œé‡ç‚¹å’Œæ•´ä½“è¿›å±•

## å·¥ä½œæˆæœ
- åˆ—å‡ºæœ¬å‘¨å®Œæˆçš„ä¸»è¦å·¥ä½œä»»åŠ¡
- çªå‡ºé‡è¦æˆæœå’Œé‡Œç¨‹ç¢‘
- ä½¿ç”¨æ•°æ®å’Œäº‹å®æ”¯æ’‘

## æ•°æ®æŒ‡æ ‡ï¼ˆå¦‚æœ‰ï¼‰
- å…³é”®ä¸šç»©æŒ‡æ ‡å®Œæˆæƒ…å†µ
- ä¸ç›®æ ‡å¯¹æ¯”åˆ†æ
- è¶‹åŠ¿å˜åŒ–è¯´æ˜

## é—®é¢˜ä¸æŒ‘æˆ˜
- æœ¬å‘¨é‡åˆ°çš„ä¸»è¦é—®é¢˜
- é‡‡å–çš„è§£å†³æªæ–½
- éœ€è¦æ”¯æŒçš„äº‹é¡¹

## ä¸‹å‘¨è®¡åˆ’
- ä¸‹å‘¨ä¸»è¦å·¥ä½œç›®æ ‡
- å…³é”®ä»»åŠ¡å’Œæ—¶é—´å®‰æ’
- é¢„æœŸæˆæœ

è¦æ±‚ï¼š
- ç»“æ„æ¸…æ™°ï¼Œå±‚æ¬¡åˆ†æ˜
- æ•°æ®å‡†ç¡®ï¼Œé‡ç‚¹çªå‡º
- è¯­è¨€ç®€æ´ä¸“ä¸š""",
        default_sections=["æœ¬å‘¨æ¦‚è¿°", "å·¥ä½œæˆæœ", "é—®é¢˜ä¸æŒ‘æˆ˜", "ä¸‹å‘¨è®¡åˆ’"]
    ),
    
    TemplateType.MONTHLY: ReportTemplate(
        id="monthly",
        name="å·¥ä½œæœˆæŠ¥",
        description="æœˆåº¦å·¥ä½œæ€»ç»“ä¸ä¸‹æœˆè§„åˆ’",
        icon="ğŸ“ˆ",
        category="å·¥ä½œæ±‡æŠ¥",
        structure=[
            {"title": "æœˆåº¦æ¦‚è¿°", "description": "æœ¬æœˆå·¥ä½œæ•´ä½“å›é¡¾", "required": True},
            {"title": "å…³é”®æˆæœ", "description": "æœ¬æœˆé‡è¦æˆæœå’Œé‡Œç¨‹ç¢‘", "required": True},
            {"title": "æ•°æ®åˆ†æ", "description": "å„é¡¹æ•°æ®æŒ‡æ ‡åˆ†æ", "required": True},
            {"title": "é¡¹ç›®è¿›å±•", "description": "å„é¡¹ç›®è¿›åº¦çŠ¶æ€", "required": True},
            {"title": "é—®é¢˜å¤ç›˜", "description": "é—®é¢˜åˆ†æä¸ç»éªŒæ€»ç»“", "required": True},
            {"title": "ä¸‹æœˆè§„åˆ’", "description": "ä¸‹æœˆå·¥ä½œç›®æ ‡ä¸è®¡åˆ’", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºå·¥ä½œæœˆæŠ¥ç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. æœ¬æœˆè¡Œä¸šé‡è¦äº‹ä»¶å’Œè¶‹åŠ¿
2. ç›¸å…³æ•°æ®æŒ‡æ ‡å’Œæœˆåº¦å¯¹æ¯”
3. ç«å“æœˆåº¦åŠ¨æ€
4. ä¸‹æœˆè¡Œä¸šé¢„æµ‹å’Œè§„åˆ’å‚è€ƒ""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆå·¥ä½œæœˆæŠ¥ï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## æœˆåº¦æ¦‚è¿°
- æœ¬æœˆå·¥ä½œæ•´ä½“å›é¡¾
- ä¸ä¸Šæœˆå¯¹æ¯”çš„ä¸»è¦å˜åŒ–
- é‡ç‚¹å·¥ä½œå®Œæˆæƒ…å†µ

## å…³é”®æˆæœ
- æœ¬æœˆå®Œæˆçš„é‡è¦é¡¹ç›®
- è¾¾æˆçš„å…³é”®é‡Œç¨‹ç¢‘
- è·å¾—çš„è®¤å¯å’Œå¥–åŠ±

## æ•°æ®åˆ†æ
- æ ¸å¿ƒæŒ‡æ ‡å®Œæˆæƒ…å†µ
- åŒæ¯”/ç¯æ¯”æ•°æ®åˆ†æ
- æ•°æ®èƒŒåçš„åŸå› åˆ†æ

## é¡¹ç›®è¿›å±•
- å„é¡¹ç›®å½“å‰çŠ¶æ€
- è¿›åº¦å¯¹æ¯”è®¡åˆ’
- é£é™©è¯†åˆ«ä¸åº”å¯¹

## é—®é¢˜å¤ç›˜
- æœ¬æœˆé‡åˆ°çš„ä¸»è¦é—®é¢˜
- æ ¹æœ¬åŸå› åˆ†æ
- ç»éªŒæ•™è®­æ€»ç»“

## ä¸‹æœˆè§„åˆ’
- ä¸‹æœˆæ ¸å¿ƒç›®æ ‡
- å…³é”®ä»»åŠ¡åˆ†è§£
- èµ„æºéœ€æ±‚ä¸æ”¯æŒ

è¦æ±‚ï¼š
- æ•°æ®é©±åŠ¨ï¼Œåˆ†ææ·±å…¥
- æ—¢æœ‰æ€»ç»“åˆæœ‰è§„åˆ’
- ä½“ç°æˆé•¿å’Œæ”¹è¿›""",
        default_sections=["æœˆåº¦æ¦‚è¿°", "å…³é”®æˆæœ", "æ•°æ®åˆ†æ", "é¡¹ç›®è¿›å±•", "é—®é¢˜å¤ç›˜", "ä¸‹æœˆè§„åˆ’"]
    ),
    
    TemplateType.COMPETITOR: ReportTemplate(
        id="competitor",
        name="ç«å“åˆ†æ",
        description="æ·±å…¥åˆ†æç«äº‰å¯¹æ‰‹çš„äº§å“ã€ç­–ç•¥å’Œå¸‚åœºè¡¨ç°",
        icon="ğŸ¯",
        category="å¸‚åœºåˆ†æ",
        structure=[
            {"title": "ç«å“æ¦‚è§ˆ", "description": "ç«å“åŸºæœ¬ä¿¡æ¯å’Œå¸‚åœºå®šä½", "required": True},
            {"title": "äº§å“å¯¹æ¯”", "description": "åŠŸèƒ½ã€ä½“éªŒã€æŠ€æœ¯å¯¹æ¯”", "required": True},
            {"title": "å¸‚åœºç­–ç•¥", "description": "å®šä»·ã€æ¸ é“ã€è¥é”€ç­–ç•¥", "required": True},
            {"title": "ä¼˜åŠ£åŠ¿åˆ†æ", "description": "SWOTåˆ†æ", "required": True},
            {"title": "åŠ¨æ€è·Ÿè¸ª", "description": "æœ€æ–°åŠ¨æ€å’Œè¶‹åŠ¿", "required": True},
            {"title": "åº”å¯¹å»ºè®®", "description": "é’ˆå¯¹æ€§çš„ç­–ç•¥å»ºè®®", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºç«å“åˆ†ææŠ¥å‘Šç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. ç«å“å…¬å¸æœ€æ–°åŠ¨æ€å’Œæ–°é—»
2. ç«å“äº§å“åŠŸèƒ½å’Œæ›´æ–°
3. ç«å“å¸‚åœºç­–ç•¥å’Œå®šä»·
4. ç”¨æˆ·è¯„ä»·å’Œåé¦ˆ
5. è¡Œä¸šå¯¹æ¯”åˆ†æ""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆç«å“åˆ†ææŠ¥å‘Šï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## ç«å“æ¦‚è§ˆ
- ç«å“åŸºæœ¬ä¿¡æ¯ï¼ˆå…¬å¸ã€äº§å“ã€å®šä½ï¼‰
- ç›®æ ‡ç”¨æˆ·å’Œå¸‚åœºç»†åˆ†
- å‘å±•å†ç¨‹å’Œé‡Œç¨‹ç¢‘

## äº§å“å¯¹æ¯”
- æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”çŸ©é˜µ
- ç”¨æˆ·ä½“éªŒå·®å¼‚
- æŠ€æœ¯æ¶æ„ç‰¹ç‚¹
- åˆ›æ–°åŠŸèƒ½äº®ç‚¹

## å¸‚åœºç­–ç•¥
- å®šä»·ç­–ç•¥åˆ†æ
- æ¸ é“å¸ƒå±€
- è¥é”€æ¨å¹¿æ–¹å¼
- ç”¨æˆ·è·å–ç­–ç•¥

## ä¼˜åŠ£åŠ¿åˆ†æï¼ˆSWOTï¼‰
- ç«å“ä¼˜åŠ¿
- ç«å“åŠ£åŠ¿
- å¸‚åœºæœºä¼š
- æ½œåœ¨å¨èƒ

## åŠ¨æ€è·Ÿè¸ª
- æœ€æ–°äº§å“æ›´æ–°
- å¸‚åœºåŠ¨ä½œ
- æˆ˜ç•¥è°ƒæ•´
- ç”¨æˆ·åé¦ˆè¶‹åŠ¿

## åº”å¯¹å»ºè®®
- å·®å¼‚åŒ–ç«äº‰ç­–ç•¥
- äº§å“ä¼˜åŒ–æ–¹å‘
- å¸‚åœºæœºä¼šæŠŠæ¡
- é£é™©åº”å¯¹æªæ–½

è¦æ±‚ï¼š
- å®¢è§‚å…¬æ­£ï¼Œæ•°æ®æ”¯æ’‘
- æ´å¯Ÿæ·±å…¥ï¼Œå»ºè®®å¯è¡Œ
- å…³æ³¨æœ€æ–°åŠ¨æ€""",
        default_sections=["ç«å“æ¦‚è§ˆ", "äº§å“å¯¹æ¯”", "å¸‚åœºç­–ç•¥", "ä¼˜åŠ£åŠ¿åˆ†æ", "åŠ¨æ€è·Ÿè¸ª", "åº”å¯¹å»ºè®®"]
    ),
    
    TemplateType.INDUSTRY: ReportTemplate(
        id="industry",
        name="è¡Œä¸šç ”ç©¶",
        description="è¡Œä¸šè¶‹åŠ¿ã€å¸‚åœºè§„æ¨¡ã€å‘å±•é¢„æµ‹ç­‰æ·±åº¦ç ”ç©¶",
        icon="ğŸ­",
        category="å¸‚åœºåˆ†æ",
        structure=[
            {"title": "è¡Œä¸šæ¦‚è§ˆ", "description": "è¡Œä¸šå®šä¹‰ã€èŒƒå›´ã€å‘å±•é˜¶æ®µ", "required": True},
            {"title": "å¸‚åœºè§„æ¨¡", "description": "å¸‚åœºå®¹é‡ã€å¢é•¿ç‡ã€é¢„æµ‹", "required": True},
            {"title": "ç«äº‰æ ¼å±€", "description": "ä¸»è¦ç©å®¶ã€å¸‚åœºä»½é¢ã€é›†ä¸­åº¦", "required": True},
            {"title": "è¶‹åŠ¿åˆ†æ", "description": "æŠ€æœ¯è¶‹åŠ¿ã€æ¶ˆè´¹è¶‹åŠ¿ã€æ”¿ç­–è¶‹åŠ¿", "required": True},
            {"title": "æœºä¼šä¸é£é™©", "description": "æŠ•èµ„æœºä¼šã€æ½œåœ¨é£é™©", "required": True},
            {"title": "ç»“è®ºå»ºè®®", "description": "ç ”ç©¶ç»“è®ºå’Œæˆ˜ç•¥å»ºè®®", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºè¡Œä¸šç ”ç©¶æŠ¥å‘Šç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. è¡Œä¸šå¸‚åœºè§„æ¨¡å’Œå¢é•¿æ•°æ®
2. è¡Œä¸šä¸»è¦ä¼ä¸šå’Œç«äº‰æ ¼å±€
3. è¡Œä¸šæ”¿ç­–æ³•è§„
4. æŠ€æœ¯å‘å±•è¶‹åŠ¿
5. æŠ•èµ„èèµ„åŠ¨æ€
6. è¡Œä¸šç—›ç‚¹å’Œæœºä¼š""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆè¡Œä¸šç ”ç©¶æŠ¥å‘Šï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## è¡Œä¸šæ¦‚è§ˆ
- è¡Œä¸šå®šä¹‰å’ŒèŒƒå›´
- äº§ä¸šé“¾ç»“æ„
- å‘å±•é˜¶æ®µå’Œç‰¹å¾
- å…³é”®æˆåŠŸå› ç´ 

## å¸‚åœºè§„æ¨¡
- å½“å‰å¸‚åœºè§„æ¨¡
- å†å²å¢é•¿ç‡
- æœªæ¥é¢„æµ‹
- ç»†åˆ†å¸‚åœºåˆ†æ

## ç«äº‰æ ¼å±€
- ä¸»è¦ä¼ä¸šåˆ†æ
- å¸‚åœºä»½é¢åˆ†å¸ƒ
- ç«äº‰å¼ºåº¦è¯„ä¼°
- è¿›å…¥å£å’

## è¶‹åŠ¿åˆ†æ
- æŠ€æœ¯å‘å±•è¶‹åŠ¿
- æ¶ˆè´¹éœ€æ±‚å˜åŒ–
- æ”¿ç­–æ³•è§„å½±å“
- å•†ä¸šæ¨¡å¼åˆ›æ–°

## æœºä¼šä¸é£é™©
- å¸‚åœºæœºä¼šè¯†åˆ«
- æŠ•èµ„ä»·å€¼è¯„ä¼°
- æ½œåœ¨é£é™©å› ç´ 
- ä¸ç¡®å®šæ€§åˆ†æ

## ç»“è®ºå»ºè®®
- æ ¸å¿ƒç ”ç©¶å‘ç°
- æˆ˜ç•¥å»ºè®®
- è¡ŒåŠ¨æ–¹æ¡ˆ
- å…³æ³¨è¦ç‚¹

è¦æ±‚ï¼š
- æ•°æ®è¯¦å®ï¼Œæ¥æºå¯é 
- åˆ†ææ·±å…¥ï¼Œé€»è¾‘æ¸…æ™°
- å‰ç»æ€§å¼ºï¼Œå»ºè®®å…·ä½“""",
        default_sections=["è¡Œä¸šæ¦‚è§ˆ", "å¸‚åœºè§„æ¨¡", "ç«äº‰æ ¼å±€", "è¶‹åŠ¿åˆ†æ", "æœºä¼šä¸é£é™©", "ç»“è®ºå»ºè®®"]
    ),
    
    TemplateType.PROJECT: ReportTemplate(
        id="project",
        name="é¡¹ç›®æ±‡æŠ¥",
        description="é¡¹ç›®è¿›åº¦ã€é£é™©ã€èµ„æºç­‰é¡¹ç›®ç®¡ç†æ±‡æŠ¥",
        icon="ğŸ“‹",
        category="é¡¹ç›®ç®¡ç†",
        structure=[
            {"title": "é¡¹ç›®æ¦‚å†µ", "description": "é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡ã€èŒƒå›´", "required": True},
            {"title": "è¿›åº¦çŠ¶æ€", "description": "å½“å‰è¿›åº¦ã€é‡Œç¨‹ç¢‘å®Œæˆæƒ…å†µ", "required": True},
            {"title": "èµ„æºæƒ…å†µ", "description": "äººåŠ›ã€é¢„ç®—ã€èµ„æºä½¿ç”¨", "required": True},
            {"title": "é£é™©ç®¡ç†", "description": "é£é™©è¯†åˆ«ã€è¯„ä¼°ã€åº”å¯¹", "required": True},
            {"title": "è´¨é‡çŠ¶å†µ", "description": "è´¨é‡æŒ‡æ ‡ã€é—®é¢˜ã€æ”¹è¿›", "required": False},
            {"title": "ä¸‹ä¸€æ­¥è®¡åˆ’", "description": "è¿‘æœŸå·¥ä½œå®‰æ’", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºé¡¹ç›®æ±‡æŠ¥ç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. é¡¹ç›®ç›¸å…³æŠ€æœ¯æ–¹æ¡ˆ
2. è¡Œä¸šæœ€ä½³å®è·µ
3. ç±»ä¼¼é¡¹ç›®æ¡ˆä¾‹
4. é£é™©åº”å¯¹ç­–ç•¥""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆé¡¹ç›®æ±‡æŠ¥ï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## é¡¹ç›®æ¦‚å†µ
- é¡¹ç›®èƒŒæ™¯å’Œç›®æ ‡
- é¡¹ç›®èŒƒå›´
- å…³é”®å¹²ç³»äºº
- æ€»ä½“æ—¶é—´çº¿

## è¿›åº¦çŠ¶æ€
- å½“å‰æ•´ä½“è¿›åº¦
- é‡Œç¨‹ç¢‘å®Œæˆæƒ…å†µ
- ä¸è®¡åˆ’å¯¹æ¯”
- å»¶æœŸåŸå› åˆ†æï¼ˆå¦‚æœ‰ï¼‰

## èµ„æºæƒ…å†µ
- äººåŠ›èµ„æºé…ç½®
- é¢„ç®—æ‰§è¡Œæƒ…å†µ
- èµ„æºä½¿ç”¨æ•ˆç‡
- èµ„æºç¼ºå£ï¼ˆå¦‚æœ‰ï¼‰

## é£é™©ç®¡ç†
- è¯†åˆ«çš„é£é™©æ¸…å•
- é£é™©ç­‰çº§è¯„ä¼°
- åº”å¯¹æªæ–½
- é£é™©ç›‘æ§æœºåˆ¶

## è´¨é‡çŠ¶å†µï¼ˆå¦‚æœ‰ï¼‰
- è´¨é‡æŒ‡æ ‡è¾¾æˆ
- å‘ç°çš„é—®é¢˜
- æ”¹è¿›æªæ–½

## ä¸‹ä¸€æ­¥è®¡åˆ’
- è¿‘æœŸå…³é”®ä»»åŠ¡
- é¢„æœŸäº¤ä»˜ç‰©
- éœ€è¦çš„æ”¯æŒ
- å…³æ³¨ç‚¹

è¦æ±‚ï¼š
- ä¿¡æ¯å‡†ç¡®ï¼ŒçŠ¶æ€æ¸…æ™°
- é£é™©é€æ˜ï¼Œåº”å¯¹æ˜ç¡®
- è®¡åˆ’å…·ä½“ï¼Œå¯æ‰§è¡Œ""",
        default_sections=["é¡¹ç›®æ¦‚å†µ", "è¿›åº¦çŠ¶æ€", "èµ„æºæƒ…å†µ", "é£é™©ç®¡ç†", "ä¸‹ä¸€æ­¥è®¡åˆ’"]
    ),
    
    TemplateType.RESEARCH: ReportTemplate(
        id="research",
        name="ç ”ç©¶æŠ¥å‘Š",
        description="é’ˆå¯¹ç‰¹å®šä¸»é¢˜çš„æ·±åº¦ç ”ç©¶æŠ¥å‘Š",
        icon="ğŸ”¬",
        category="ç ”ç©¶åˆ†æ",
        structure=[
            {"title": "ç ”ç©¶èƒŒæ™¯", "description": "ç ”ç©¶ç›®çš„ã€é—®é¢˜ã€èŒƒå›´", "required": True},
            {"title": "ç ”ç©¶æ–¹æ³•", "description": "ç ”ç©¶è®¾è®¡ã€æ•°æ®æ¥æºã€åˆ†ææ–¹æ³•", "required": True},
            {"title": "ç ”ç©¶å‘ç°", "description": "æ ¸å¿ƒå‘ç°ã€æ•°æ®åˆ†æ", "required": True},
            {"title": "æ·±åº¦æ´å¯Ÿ", "description": "æ´å¯Ÿè§£è¯»ã€åŸå› åˆ†æ", "required": True},
            {"title": "æ¡ˆä¾‹å‚è€ƒ", "description": "ç›¸å…³æ¡ˆä¾‹ã€æœ€ä½³å®è·µ", "required": False},
            {"title": "ç»“è®ºå»ºè®®", "description": "ç ”ç©¶ç»“è®ºã€è¡ŒåŠ¨å»ºè®®", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºç ”ç©¶æŠ¥å‘Šç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. ç ”ç©¶ä¸»é¢˜ç›¸å…³ç†è®ºå’Œæ¡†æ¶
2. è¡Œä¸šæ•°æ®å’Œç»Ÿè®¡
3. ç›¸å…³æ¡ˆä¾‹å’Œå®è·µ
4. ä¸“å®¶è§‚ç‚¹å’Œç ”ç©¶æŠ¥å‘Š
5. æœ€æ–°ç ”ç©¶æˆæœ""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆç ”ç©¶æŠ¥å‘Šï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## ç ”ç©¶èƒŒæ™¯
- ç ”ç©¶ç›®çš„å’Œæ„ä¹‰
- ç ”ç©¶é—®é¢˜
- ç ”ç©¶èŒƒå›´
- ç ”ç©¶é™åˆ¶

## ç ”ç©¶æ–¹æ³•
- ç ”ç©¶è®¾è®¡
- æ•°æ®æ¥æº
- åˆ†ææ–¹æ³•
- æ ·æœ¬è¯´æ˜

## ç ”ç©¶å‘ç°
- æ ¸å¿ƒå‘ç°æ€»ç»“
- æ•°æ®å±•ç¤ºå’Œåˆ†æ
- å…³é”®ç»Ÿè®¡ç»“æœ
- é‡è¦æ¨¡å¼è¯†åˆ«

## æ·±åº¦æ´å¯Ÿ
- å‘ç°è§£è¯»
- åŸå› åˆ†æ
- å½±å“è¯„ä¼°
- è¶‹åŠ¿é¢„æµ‹

## æ¡ˆä¾‹å‚è€ƒï¼ˆå¦‚æœ‰ï¼‰
- ç›¸å…³æ¡ˆä¾‹åˆ†æ
- æœ€ä½³å®è·µ
- å¤±è´¥æ•™è®­
- å¯å€Ÿé‰´ç»éªŒ

## ç»“è®ºå»ºè®®
- ä¸»è¦ç»“è®º
- ç†è®ºè´¡çŒ®
- å®è·µå»ºè®®
- æœªæ¥ç ”ç©¶æ–¹å‘

è¦æ±‚ï¼š
- æ–¹æ³•ç§‘å­¦ï¼Œæ•°æ®å¯é 
- åˆ†ææ·±å…¥ï¼Œæ´å¯Ÿç‹¬åˆ°
- å»ºè®®å…·ä½“ï¼Œå¯æ“ä½œ""",
        default_sections=["ç ”ç©¶èƒŒæ™¯", "ç ”ç©¶æ–¹æ³•", "ç ”ç©¶å‘ç°", "æ·±åº¦æ´å¯Ÿ", "ç»“è®ºå»ºè®®"]
    ),
    
    TemplateType.SUMMARY: ReportTemplate(
        id="summary",
        name="æ€»ç»“æ±‡æŠ¥",
        description="æ´»åŠ¨ã€äº‹ä»¶ã€é˜¶æ®µçš„æ€»ç»“æ€§æ±‡æŠ¥",
        icon="ğŸ“",
        category="å·¥ä½œæ±‡æŠ¥",
        structure=[
            {"title": "èƒŒæ™¯ä»‹ç»", "description": "äº‹ä»¶/æ´»åŠ¨èƒŒæ™¯", "required": True},
            {"title": "æ‰§è¡Œè¿‡ç¨‹", "description": "å…·ä½“æ‰§è¡Œæ­¥éª¤å’Œè¿‡ç¨‹", "required": True},
            {"title": "æˆæœå±•ç¤º", "description": "å–å¾—çš„æˆæœå’Œæ•ˆæœ", "required": True},
            {"title": "ç»éªŒæ€»ç»“", "description": "æˆåŠŸç»éªŒå’Œæ•™è®­", "required": True},
            {"title": "åç»­å»ºè®®", "description": "æ”¹è¿›å»ºè®®å’Œåç»­è®¡åˆ’", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºæ€»ç»“æ±‡æŠ¥ç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. ç›¸å…³èƒŒæ™¯ä¿¡æ¯
2. è¡Œä¸šå¯¹æ¯”æ•°æ®
3. æœ€ä½³å®è·µå‚è€ƒ
4. æ”¹è¿›æ–¹æ³•å»ºè®®""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆæ€»ç»“æ±‡æŠ¥ï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## èƒŒæ™¯ä»‹ç»
- äº‹ä»¶/æ´»åŠ¨èƒŒæ™¯
- ç›®æ ‡å’Œé¢„æœŸ
- æ—¶é—´èŒƒå›´
- å‚ä¸äººå‘˜

## æ‰§è¡Œè¿‡ç¨‹
- ä¸»è¦æ‰§è¡Œæ­¥éª¤
- å…³é”®æ—¶é—´èŠ‚ç‚¹
- èµ„æºæŠ•å…¥
- è¿‡ç¨‹äº®ç‚¹

## æˆæœå±•ç¤º
- é‡åŒ–æˆæœ
- å®šæ€§æˆæœ
- ä¸ç›®æ ‡å¯¹æ¯”
- å½±å“åŠ›è¯„ä¼°

## ç»éªŒæ€»ç»“
- æˆåŠŸå› ç´ 
- ä¸è¶³ä¹‹å¤„
- ç»éªŒæ•™è®­
- å¯å¤åˆ¶ç»éªŒ

## åç»­å»ºè®®
- æ”¹è¿›æ–¹å‘
- ä¼˜åŒ–å»ºè®®
- åç»­è®¡åˆ’
- èµ„æºéœ€æ±‚

è¦æ±‚ï¼š
- äº‹å®æ¸…æ™°ï¼Œæ•°æ®å‡†ç¡®
- ç»éªŒæç‚¼åˆ°ä½
- å»ºè®®å…·ä½“å¯è¡Œ""",
        default_sections=["èƒŒæ™¯ä»‹ç»", "æ‰§è¡Œè¿‡ç¨‹", "æˆæœå±•ç¤º", "ç»éªŒæ€»ç»“", "åç»­å»ºè®®"]
    ),
    
    TemplateType.MARKETING: ReportTemplate(
        id="marketing",
        name="è¥é”€æ–¹æ¡ˆ",
        description="è¥é”€ç­–åˆ’ã€æ¨å¹¿æ–¹æ¡ˆã€æ´»åŠ¨æ–¹æ¡ˆç­‰",
        icon="ğŸš€",
        category="è¥é”€æ–¹æ¡ˆ",
        structure=[
            {"title": "å¸‚åœºåˆ†æ", "description": "ç›®æ ‡å¸‚åœºã€ç”¨æˆ·ç”»åƒã€ç«äº‰ç¯å¢ƒ", "required": True},
            {"title": "è¥é”€ç›®æ ‡", "description": "å…·ä½“ã€å¯è¡¡é‡çš„è¥é”€ç›®æ ‡", "required": True},
            {"title": "ç­–ç•¥è§„åˆ’", "description": "è¥é”€ç­–ç•¥ã€å®šä½ã€å·®å¼‚åŒ–", "required": True},
            {"title": "æ‰§è¡Œæ–¹æ¡ˆ", "description": "å…·ä½“æ‰§è¡Œè®¡åˆ’ã€æ¸ é“ã€å†…å®¹", "required": True},
            {"title": "é¢„ç®—è§„åˆ’", "description": "é¢„ç®—åˆ†é…ã€ROIé¢„æœŸ", "required": True},
            {"title": "æ•ˆæœè¯„ä¼°", "description": "KPIã€è¯„ä¼°æ–¹æ³•ã€ä¼˜åŒ–æœºåˆ¶", "required": True}
        ],
        planner_prompt="""è¯·ä¸ºè¥é”€æ–¹æ¡ˆç”Ÿæˆæœç´¢æ­¥éª¤ã€‚éœ€è¦å…³æ³¨ï¼š
1. ç›®æ ‡å¸‚åœºç›¸å…³æ•°æ®
2. ç«å“è¥é”€æ¡ˆä¾‹
3. è¡Œä¸šè¥é”€è¶‹åŠ¿
4. è¥é”€æ¸ é“æ•ˆæœ
5. ç”¨æˆ·è¡Œä¸ºæ•°æ®""",
        report_prompt="""è¯·æ ¹æ®æœç´¢ç»“æœç”Ÿæˆè¥é”€æ–¹æ¡ˆï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

## å¸‚åœºåˆ†æ
- ç›®æ ‡å¸‚åœºè§„æ¨¡
- ç”¨æˆ·ç”»åƒåˆ†æ
- ç«äº‰ç¯å¢ƒ
- å¸‚åœºæœºä¼š

## è¥é”€ç›®æ ‡
- æ€»ä½“ç›®æ ‡
- åˆ†é˜¶æ®µç›®æ ‡
- é‡åŒ–æŒ‡æ ‡
- æ—¶é—´èŠ‚ç‚¹

## ç­–ç•¥è§„åˆ’
- è¥é”€å®šä½
- å·®å¼‚åŒ–ç­–ç•¥
- æ ¸å¿ƒå–ç‚¹
- ä¼ æ’­ç­–ç•¥

## æ‰§è¡Œæ–¹æ¡ˆ
- æ¸ é“é€‰æ‹©
- å†…å®¹è§„åˆ’
- æ´»åŠ¨è®¾è®¡
- æ—¶é—´å®‰æ’

## é¢„ç®—è§„åˆ’
- é¢„ç®—æ€»é¢
- åˆ†é…æ–¹æ¡ˆ
- æˆæœ¬é¢„ä¼°
- ROIé¢„æœŸ

## æ•ˆæœè¯„ä¼°
- KPIè®¾å®š
- ç›‘æµ‹æ–¹æ³•
- è¯„ä¼°å‘¨æœŸ
- ä¼˜åŒ–æœºåˆ¶

è¦æ±‚ï¼š
- ç›®æ ‡æ˜ç¡®ï¼Œå¯è¡¡é‡
- ç­–ç•¥æ¸…æ™°ï¼Œæœ‰å·®å¼‚åŒ–
- æ–¹æ¡ˆå…·ä½“ï¼Œå¯æ‰§è¡Œ
- é¢„ç®—åˆç†ï¼ŒROIæ˜ç¡®""",
        default_sections=["å¸‚åœºåˆ†æ", "è¥é”€ç›®æ ‡", "ç­–ç•¥è§„åˆ’", "æ‰§è¡Œæ–¹æ¡ˆ", "é¢„ç®—è§„åˆ’", "æ•ˆæœè¯„ä¼°"]
    )
}


def get_template(template_id: str) -> ReportTemplate:
    """è·å–æŒ‡å®šæ¨¡æ¿"""
    if template_id not in REPORT_TEMPLATES:
        raise ValueError(f"æœªçŸ¥çš„æ¨¡æ¿ID: {template_id}")
    return REPORT_TEMPLATES[template_id]


def get_all_templates() -> List[ReportTemplate]:
    """è·å–æ‰€æœ‰æ¨¡æ¿åˆ—è¡¨"""
    return list(REPORT_TEMPLATES.values())


def get_templates_by_category(category: str) -> List[ReportTemplate]:
    """æŒ‰åˆ†ç±»è·å–æ¨¡æ¿"""
    return [t for t in REPORT_TEMPLATES.values() if t.category == category]


def get_template_categories() -> List[str]:
    """è·å–æ‰€æœ‰æ¨¡æ¿åˆ†ç±»"""
    return list(set(t.category for t in REPORT_TEMPLATES.values()))


def get_default_template() -> ReportTemplate:
    """è·å–é»˜è®¤æ¨¡æ¿ï¼ˆé€šç”¨/ä¸ä½¿ç”¨æ¨¡æ¿ï¼‰"""
    return REPORT_TEMPLATES[TemplateType.GENERAL]
